# DKonsole Configuration
# Only configure what you need. Leave the rest as default.

# -----------------------------------------------------------------------------
# 1. Authentication (REQUIRED)
# -----------------------------------------------------------------------------
admin:
  # Username for the dashboard
  username: admin
  # Password hash (Argon2). Generate with:
  # echo -n "password" | argon2 $(openssl rand -base64 16) -id -t 3 -m 12 -p 1 -l 32 -e
  passwordHash: ""

# JWT Secret for session security. Generate with: openssl rand -base64 32
jwtSecret: ""

# -----------------------------------------------------------------------------
# 2. Ingress / External Access (REQUIRED for external access)
# -----------------------------------------------------------------------------
ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: dkonsole.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: dkonsole-tls
      hosts:
        - dkonsole.example.com

# Allowed Origins for WebSocket (CORS)
# Comma-separated list of allowed origins (e.g., "https://dkonsole.example.com,http://localhost:5173")
# If empty, only same-origin requests are allowed.
allowedOrigins: ""

# Pod Security Context (Run as non-root user 'app' uid 1000)
podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# -----------------------------------------------------------------------------
# 3. Docker Image (Optional - Defaults to official image)
# -----------------------------------------------------------------------------
image:
  repository: dkonsole/dkonsole
  tag: "1.1.0"
  pullPolicy: Always

# -----------------------------------------------------------------------------
# 4. Persistence (Optional - For custom logos)
# -----------------------------------------------------------------------------
persistence:
  enabled: true
  size: 1Gi
  # storageClass: "standard" # Uncomment to specify a storage class

# -----------------------------------------------------------------------------
# Advanced Configuration (Defaults are usually fine)
# -----------------------------------------------------------------------------

# Prometheus Integration (Optional)
# Configure the Prometheus endpoint to enable historical metrics for Pods
# If not set, the Metrics tab will not be displayed in Pod details
# Example: "http://prometheus-server.monitoring.svc.cluster.local:9090"
# Features enabled:
#   - Historical CPU and memory metrics for Pods
#   - Time range selector (1h, 6h, 12h, 1d, 7d, 15d)
#   - Metrics tab in Pod details view
prometheusUrl: ""

replicaCount: 1

service:
  type: ClusterIP
  port: 8080

resources:
  limits: { cpu: 500m, memory: 512Mi }
  requests: { cpu: 100m, memory: 128Mi }

# RBAC Permissions (Required for dashboard functionality)
# FULL ACCESS to ALL resources (both cluster-scoped and namespaced) - allows importing ANY Kubernetes resource via YAML
rbac:
  create: true
  clusterResources:
    # FULL ACCESS to cluster-scoped resources (ClusterRole, ClusterRoleBinding, PersistentVolume, StorageClass, etc.)
    - apiGroups: ["*"]
      resources: ["*"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
  nonResourceURLs: ["*"]
  namespacedResources:
    # FULL ACCESS to all namespaced resources in all API groups
    # This enables importing ANY Kubernetes resource (including CRDs) via YAML
    - apiGroups: [""]
      resources: ["*"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
    - apiGroups: ["*"]
      resources: ["*"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
    
    # Special subresources
    - apiGroups: [""]
      resources: ["pods/log", "pods/exec"]
      verbs: ["get", "create"]
    - apiGroups: ["apps"]
      resources: ["deployments/scale", "statefulsets/scale", "replicasets/scale"]
      verbs: ["get", "update", "patch"]
    
    # Metrics API
    - apiGroups: ["metrics.k8s.io"]
      resources: ["pods", "nodes"]
      verbs: ["get", "list"]
