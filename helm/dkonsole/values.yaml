# DKonsole Configuration
# Only configure what you need. Leave the rest as default.

# -----------------------------------------------------------------------------
# 1. Authentication (REQUIRED)
# -----------------------------------------------------------------------------
admin:
  # Username for the dashboard
  username: admin
  # Password hash (Argon2). Generate with:
  # echo -n "password" | argon2 $(openssl rand -base64 16) -id -t 3 -m 12 -p 1 -l 32 -e
  passwordHash: ""

# JWT Secret for session security. Generate with: openssl rand -base64 32
jwtSecret: ""

# -----------------------------------------------------------------------------
# 2. Ingress / External Access (REQUIRED for external access)
# -----------------------------------------------------------------------------
ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: dkonsole.example.com
      paths:
        - path: /api
          pathType: Prefix
          backend: backend
        - path: /
          pathType: Prefix
          backend: frontend
  tls:
    - secretName: dkonsole-tls
      hosts:
        - dkonsole.example.com

# Allowed Origins for WebSocket (CORS)
# Comma-separated list of allowed origins (e.g., "https://dkonsole.example.com,http://localhost:5173")
# If empty, only same-origin requests are allowed.
allowedOrigins: ""

# Pod Security Context (Run as non-root user 'app' uid 1000)
podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# -----------------------------------------------------------------------------
# 3. Docker Images (Optional - Defaults to official images)
# -----------------------------------------------------------------------------
image:
  backend:
    repository: dkonsole/dkonsole-backend
    tag: "0.0.5"
    pullPolicy: Always
  frontend:
    repository: dkonsole/dkonsole-frontend
    tag: "0.0.5"
    pullPolicy: Always

# -----------------------------------------------------------------------------
# 4. Persistence (Optional - For custom logos)
# -----------------------------------------------------------------------------
persistence:
  enabled: true
  size: 1Gi
  # storageClass: "standard" # Uncomment to specify a storage class

# -----------------------------------------------------------------------------
# Advanced Configuration (Defaults are usually fine)
# -----------------------------------------------------------------------------
replicaCount: 1

service:
  type: ClusterIP
  backend: { port: 8080 }
  frontend: { port: 80 }

resources:
  backend:
    limits: { cpu: 500m, memory: 512Mi }
    requests: { cpu: 100m, memory: 128Mi }
  frontend:
    limits: { cpu: 200m, memory: 256Mi }
    requests: { cpu: 50m, memory: 64Mi }

# RBAC Permissions (Required for dashboard functionality)
rbac:
  create: true
  clusterResources:
    - apiGroups: ["*"]
      resources: ["*"]
      verbs: ["get", "list", "watch"]
  nonResourceURLs: ["*"]
  namespacedResources:
    - apiGroups: ["", "apps", "batch", "networking.k8s.io", "rbac.authorization.k8s.io", "metrics.k8s.io"]
      resources: ["*"]
      verbs: ["*"]
